---
import "#styles/global.css";
import Header from "#components/Header.astro";
import Footer from "#components/Footer.astro";
import { ClientRouter } from "astro:transitions";

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
---

<!doctype html>
<html lang="en-AU" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <meta name="theme-color" content="#ffffff" />
    <meta name="color-scheme" content="light dark" />
    <link rel="canonical" href={canonicalURL} />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <!-- <ClientRouter /> -->
    <slot name="head" />
  </head>
  <body class="bg-neutral-1 text-neutral-12">
    <Header />

    <slot />

    <script>
      import { Application } from "@hotwired/stimulus";
      import DateTime from "#controllers/datetime";
      // import Map from "#controllers/map";
      // import Carousel from "#controllers/carousel";
      // import Disclosure from "#controllers/disclosure";
      // import Tabs from "#controllers/tabs";
      // import Popover from "#controllers/popover";
      // import "unpoly";

      // window.up.log.disable();

      // window.up.link.config.followSelectors.push("a[href]");
      // window.up.link.config.instantSelectors.push("a[href]");
      // window.up.link.config.preloadSelectors.push("a[href]");

      // window.up.form.config.submitSelectors.push("form");

      window.Stimulus = Application.start();
      window.Stimulus.register("datetime", DateTime);
      // window.Stimulus.register("map", Map);
      // window.Stimulus.register("carousel", Carousel);
      // window.Stimulus.register("disclosure", Disclosure);
      // window.Stimulus.register("tabs", Tabs);
      // window.Stimulus.register("popover", Popover);
      
      // window.stackbit = window.stackbit || {};
  
      // const handler = () => {
      //   document.addEventListener("astro:page-load", () => {
      //     // window.stackbit.navigate("");
      //     console.log(window.stackbit.currentPageUrl)
      //   });
      // };
  
      // if (window.stackbit) {
      //   handler();
      // } else {
      //   window.addEventListener("stackbitInitialized", handler);
      // }
      </script>
  </body>
</html>
